<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>입사지원현황</title>
  <style>
    :root{
      --bg:#eef2f6;
      --card:#ffffff;
      --text:#111827;
      --muted:#6b7280;
      --line:#e5e7eb;
      --blue:#2f86ff;
      --blue2:#1f6fe6;
      --shadow: 0 18px 40px rgba(0,0,0,.18);
      --radius:0px;
      --font: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, "Apple SD Gothic Neo","Noto Sans KR", sans-serif;
    }
    *{box-sizing:border-box}
    body{
      margin:0; font-family:var(--font); color:var(--text); background:var(--bg);
      min-height:100vh;
    }

    /* background hero (just for vibe) */
    .hero{
      height:280px;
      display:flex; align-items:center; justify-content:center;
      background: radial-gradient(1200px 500px at 50% 20%, #ffffff 0%, #f2f6ff 35%, #e8f0ff 70%, #e9edf5 100%);
      padding:32px 18px;
      text-align:center;
    }
    .hero h1{
      margin:0;
      font-size:34px;
      letter-spacing:-.02em;
      line-height:1.2;
      font-weight:900;
    }
    .hero h1 .thin{font-weight:400}
    .hero p{margin:14px 0 0;color:var(--muted);font-size:14px}

    /* full-screen overlay -> page */
    .overlay{
      position:fixed;
      inset:0;
      background:#ffffff;
      display:flex;
      align-items:stretch;
      justify-content:flex-start;
      padding:0;
    }

    .modal{
      width:100%;
      height:100dvh;
      max-height:100dvh;
      background:var(--card);
      border-radius:0;
      box-shadow:none;
      border:none;
      display:flex;
      flex-direction:column;
      overflow: visible;
    }

    /* header */
    .mHead{
      position:sticky;
      top:0;
      z-index:10;
      padding: calc(10px + env(safe-area-inset-top)) 14px 10px 12px;
      background: linear-gradient(180deg, var(--blue) 0%, var(--blue2) 100%);
      color:#fff;
      display:flex;
      align-items:center;
      justify-content:space-between;
      font-weight:900;
      letter-spacing:-.01em;
      border-radius:0 !important;
    }

    .nav{display:flex; align-items:center; gap:10px;}
    .backBtn{
      width:44px; height:40px;
      border-radius:12px;
      border:1px solid rgba(255,255,255,.35);
      background: rgba(255,255,255,.12);
      color:#fff;
      font-size:18px;
      font-weight:900;
      cursor:pointer;
    }
    .backBtn:active{transform:scale(.98)}
    .navTitle{
      font-size:16px;
      font-weight:900;
    }

    /* content scroll area */
    .content{
      flex:1;
      overflow:auto;
      -webkit-overflow-scrolling: touch;
      background:#fff;
    }

    /* sections */
    .section{
      border-top:1px solid var(--line);
      background:#fff;
    }
    .row{
      display:flex; align-items:center; justify-content:space-between;
      padding:12px 14px;
      gap:12px;
    }
    .row .left{
      display:flex; align-items:center; gap:10px;
      min-width:0;
      color:#374151;
      font-size:13px;
    }
    .row .left strong{font-weight:900}
    .row .left span{white-space:nowrap}
    .row .left .dates{
      white-space:nowrap;
      overflow:hidden;
      text-overflow:ellipsis;
      max-width: 260px;
    }

    .select{
      display:flex; align-items:center; gap:8px;
      padding:8px 10px;
      border:1px solid var(--line);
      border-radius:12px;
      font-size:13px;
      background:#fff;
      color:#111827;
      cursor:pointer;
      user-select:none;
      white-space:nowrap;
    }

    /* make <select> look like button */
    select.select{
      appearance:none;
      -webkit-appearance:none;
      background:#fff;
      padding-right:34px;
      background-image:
        linear-gradient(45deg, transparent 50%, #6b7280 50%),
        linear-gradient(135deg, #6b7280 50%, transparent 50%);
      background-position: calc(100% - 16px) 50%, calc(100% - 10px) 50%;
      background-size: 6px 6px, 6px 6px;
      background-repeat:no-repeat;
    }

    /* tabs */
    .tabs{
      display:grid;
      grid-template-columns:repeat(4, 1fr);
      border-top:1px solid var(--line);
      border-bottom:1px solid var(--line);
      background:#fbfcff;
    }
    .tab{
      padding:12px 8px 10px;
      text-align:center;
      font-size:12px;
      color:#374151;
      cursor:pointer;
      user-select:none;
      position:relative;
    }
    .tab:not(:last-child){border-right:1px solid var(--line)}
    .tab .n{
      margin-top:6px;
      font-size:18px;
      font-weight:900;
      color:#111827;
    }
    .tab.active{
      background:#ffffff;
    }
    .tab.active::after{
      content:"";
      position:absolute;
      left:10px; right:10px; bottom:-1px;
      height:3px;
      border-radius:999px;
      background: var(--blue);
    }

    /* big button */
    .bigBtnWrap{padding:12px 14px}
    .bigBtn{
      width:100%;
      border:none;
      border-radius:14px;
      padding:14px 14px;
      background: linear-gradient(180deg, var(--blue) 0%, var(--blue2) 100%);
      color:#fff;
      font-weight:900;
      letter-spacing:-.01em;
      font-size:14px;
      cursor:pointer;
    }
    .bigBtn:active{transform:scale(.99)}

    /* list item */
    .item{
      padding:12px 14px;
      border-top:1px solid var(--line);
      background:#fff;
    }
    .badge{
      display:inline-block;
      margin: 0;
      vertical-align: top;
      padding:6px 10px;
      border-radius:999px;
      font-size:12px;
      font-weight:900;
      background:#ecf3ff;
      color:#165dcc;
      border:1px solid #d8e7ff;
      white-space:nowrap;
    }
    .itemTop{
      display:flex;
      gap:10px;
      align-items:flex-start;
      justify-content:space-between;
    }
    .itemTop .meta{
      min-width:0;
      flex:1;
    }
    .rightTop{
      display:flex;
      flex-direction:column;
      align-items:flex-end;
      gap:10px;
      flex-shrink:0;
    }

    .company{
      font-weight:900;
      font-size:14px;
      margin:0;
      letter-spacing:-.01em;
    }
    .job{
      margin: 2px 0 0;
      color:#374151;
      font-size:13px;
      line-height:1.35;
      letter-spacing:-.01em;
    }

    .kv{
      margin-top:10px;
      display:grid;
      grid-template-columns:64px 1fr;
      row-gap:4px;
      column-gap:6px;
      font-size:12px;
      color:#374151;
      align-items:center;
    }
    .k{color:var(--muted)}
    .inlinePill{
      display:inline-flex;
      padding:3px 8px;
      border-radius:999px;
      border:1px solid var(--line);
      background:#fff;
      font-size:11px;
      font-weight:800;
      color:#374151;
      margin-left:4px;
      transform: translateY(-1px);
    }

    .actions{
      margin-top:12px;
      display:flex;
      gap:10px;
    }
    .smallBtn{
      flex:1;
      border:1px solid var(--line);
      border-radius:12px;
      padding:10px 10px;
      background:#fff;
      font-weight:900;
      font-size:13px;
      cursor:pointer;
    }
    .smallBtn:active{transform:scale(.99)}

    /* recommended */
    .subHead{
      padding:12px 14px;
      border-top:1px solid var(--line);
      background:#fbfcff;
      color:#374151;
      font-weight:900;
      font-size:13px;
    }
    .reco{
      padding:12px 14px 16px;
      display:grid;
      grid-template-columns:1fr 1fr;
      gap:10px;
      background:#fbfcff;
    }
    .recoCard{
      border:1px solid var(--line);
      border-radius:14px;
      background:#fff;
      padding:12px;
      min-height:110px;
      display:flex;
      flex-direction:column;
      justify-content:space-between;
      gap:10px;
    }
    .recoCard .t{
      font-weight:900;
      font-size:13px;
      letter-spacing:-.01em;
      line-height:1.25;
      margin:0;
    }
    .recoCard .d{
      color:var(--muted);
      font-size:12px;
      margin:0;
      line-height:1.35;
    }
    .dday{
      font-weight:900;
      font-size:12px;
      color:#111827;
      display:flex;
      align-items:center;
      gap:6px;
    }
    .dday .tag{
      display:inline-flex;
      padding:3px 8px;
      border-radius:999px;
      background:#f3f4f6;
      border:1px solid var(--line);
      color:#374151;
      font-weight:900;
      font-size:11px;
    }

    @media (max-width: 360px){
      .reco{grid-template-columns:1fr}
    }
  </style>
</head>

<body>
  <div class="hero">
    <div>
      <h1>이력서 작성 <span class="thin">및 수정</span><br/>입사지원현황까지 <span class="thin">한번에!</span></h1>
      <p>연습용 UI: 전체 화면 + 탭 + 리스트 + 추천공고</p>
    </div>
  </div>

  <div class="overlay" id="overlay">
    <div class="modal" role="dialog" aria-modal="true" aria-label="입사지원현황">
      <div class="mHead">
        <div class="nav">
          <button class="backBtn" id="backBtn" aria-label="뒤로가기">←</button>
          <div class="navTitle">지원 현황</div>
        </div>
        <div style="width:44px"></div>
      </div>

      <div class="content">
        <!-- 기간 -->
        <div class="section">
          <div class="row">
            <div class="left">
              <span><strong>조회기간</strong> | </span>
              <span class="dates" id="dateRange"></span>
            </div>

            <select class="select" id="periodSelect" aria-label="기간조회">
              <option value="1">최근 1개월</option>
              <option value="3" selected>최근 3개월</option>
              <option value="6">최근 6개월</option>
              <option value="12">최근 12개월</option>
              <option value="all">전체</option>
            </select>
          </div>

          <!-- 탭 -->
          <div class="tabs" id="tabs">
            <div class="tab active" data-status="applied">지원완료<div class="n" id="cApplied">0</div></div>
            <div class="tab" data-status="opened">열람<div class="n" id="cOpened">0</div></div>
            <div class="tab" data-status="unopened">미열람<div class="n" id="cUnopened">0</div></div>
            <div class="tab" data-status="canceled">지원취소<div class="n" id="cCanceled">0</div></div>
          </div>

          <!-- 큰 버튼 -->
          <div class="bigBtnWrap">
            <button class="bigBtn" id="certBtn">취업활동 증명서 발급하기</button>
          </div>
        </div>

        <!-- 지원 리스트 -->
        <div class="section" id="listArea"></div>

        <!-- 추천 공고 -->
        <div class="subHead">이 공고와 함께 본 공고</div>
        <div class="reco">
          <div class="recoCard">
            <div>
              <p class="t">쿠팡 주식회사</p>
              <p class="d">쿠팡 이커머스 경력직 공개채용 - 서비스기획, 마케팅,영업, 물류, 개발</p>
            </div>
            <div class="dday"><span class="tag">D-7</span><span>마감 임박</span></div>
          </div>
          <div class="recoCard">
            <div>
              <p class="t">삼성물산</p>
              <p class="d">모바일 이커머스 서비스 모집</p>
            </div>
            <div class="dday"><span class="tag">D-5</span><span>마감 임박</span></div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script>
    // --- 연습용 데이터 ---
    const items = [
      {
        statusText: "진행중 (~3/02)",
        company: "잡코리아",
        title: "잡코리아 UX/UI 디자이너 채용",
        appliedAt: "2026.02.01",
        opened: false,
        canceled: false,
        resume: "UX/UI 디자이너 및 퍼블리싱, 서비스기획"
      },
      {
        statusText: "진행중 (~4/10)",
        company: "블루픽셀",
        title: "모바일 게임 UI 디자이너",
        appliedAt: "2026.01.21",
        opened: true,
        canceled: false,
        resume: "게임 UI/UX 포트폴리오"
      },
      {
        statusText: "열람 (1/22)",
        company: "오로라랩",
        title: "프로덕트 디자이너",
        appliedAt: "2026.01.21",
        opened: true,
        canceled: false,
        resume: "UI 디자이너 이력서"
      },
      {
        statusText: "미열람",
        company: "메테오스튜디오",
        title: "캐주얼 RPG UI/UX",
        appliedAt: "2026.01.21",
        opened: false,
        canceled: false,
        resume: "UI 디자이너 이력서"
      }
    ];

    const el = (id) => document.getElementById(id);

    function isApplied(x){
      // 지원완료 = 취소 제외 전체
      return x.canceled !== true;
    }

    function matchesTab(x, tab){
      if(tab === "applied")  return isApplied(x);
      if(tab === "opened")   return isApplied(x) && x.opened === true;
      if(tab === "unopened") return isApplied(x) && x.opened !== true;
      if(tab === "canceled") return x.canceled === true;
      return false;
    }

    function renderCounts(){
      el("cApplied").textContent  = items.filter(x => matchesTab(x,"applied")).length;
      el("cOpened").textContent   = items.filter(x => matchesTab(x,"opened")).length;
      el("cUnopened").textContent = items.filter(x => matchesTab(x,"unopened")).length;
      el("cCanceled").textContent = items.filter(x => matchesTab(x,"canceled")).length;
    }

    function formatDateDot(d){
      const y = d.getFullYear();
      const m = String(d.getMonth() + 1).padStart(2, "0");
      const day = String(d.getDate()).padStart(2, "0");
      return `${y}.${m}.${day}`;
    }

    function parseDotDate(s){
      const [y,m,d] = s.split(".").map(Number);
      const dt = new Date(y, (m-1), d);
      dt.setHours(0,0,0,0);
      return dt;
    }

    function setDateRangeByMonths(monthsOrAll){
      const today = new Date();
      today.setHours(0,0,0,0);

      if(monthsOrAll === "all"){
        const minDate = items.reduce((min, x)=>{
          const dt = parseDotDate(x.appliedAt);
          return dt < min ? dt : min;
        }, today);

        el("dateRange").textContent = `${formatDateDot(minDate)} ~ ${formatDateDot(today)}`;
        return { start: minDate, end: today };
      }

      const months = Number(monthsOrAll);
      const start = new Date(today);
      start.setMonth(today.getMonth() - months);

      el("dateRange").textContent = `${formatDateDot(start)} ~ ${formatDateDot(today)}`;
      return { start, end: today };
    }

    let current = "applied";
    let currentMonths = "3";              // 기본 3개월
    let currentRange = { start:null, end:null };

    function setActiveTab(status){
      document.querySelectorAll(".tab").forEach(t=>{
        t.classList.toggle("active", t.dataset.status === status);
      });
    }

    function renderList(filterStatus){
      const list = items
        .filter(x => {
          if(!matchesTab(x, filterStatus)) return false;

          // 기간 필터
          if(currentRange?.start && currentRange?.end){
            const dt = parseDotDate(x.appliedAt);
            return dt >= currentRange.start && dt <= currentRange.end;
          }
          return true;
        })
        // 최신 지원일이 위로 오게
        .sort((a,b)=> parseDotDate(b.appliedAt) - parseDotDate(a.appliedAt));

      const html = list.map(x => `
        <div class="item">
          <div class="itemTop">
            <div class="meta">
              <p class="company">${x.company}</p>
              <p class="job">${x.title}</p>
            </div>
            <div class="rightTop">
              <span class="badge">${x.statusText ?? "진행중"}</span>
            </div>
          </div>

          <div class="kv">
            <div class="k">지원일</div>
            <div>${x.appliedAt}
              ${x.canceled
                ? `<span class="inlinePill">취소</span>`
                : (x.opened ? `<span class="inlinePill">열람</span>` : `<span class="inlinePill">미열람</span>`)
              }
            </div>
            <div class="k">지원이력서</div>
            <div>${x.resume ?? "-"}</div>
          </div>

          <div class="actions">
            <button class="smallBtn" type="button" onclick="alert('이력서 보기(연습)')">이력서 보기</button>
            <button class="smallBtn" type="button" onclick="alert('지원취소(연습)')">지원취소</button>
          </div>
        </div>
      `).join("");

      el("listArea").innerHTML =
        html || `<div class="item"><p style="margin:0;color:#6b7280;font-size:13px">항목이 없습니다.</p></div>`;
    }

    function renderAll(){
      currentRange = setDateRangeByMonths(currentMonths);
      renderList(current);
    }

    // interactions
    el("backBtn").addEventListener("click", ()=>{
      el("overlay").style.display = "none";
    });

    el("tabs").addEventListener("click", (e)=>{
      const tab = e.target.closest(".tab");
      if(!tab) return;
      current = tab.dataset.status;
      setActiveTab(current);
      renderCounts();
      renderAll();
    });

    el("certBtn").addEventListener("click", ()=>{
      alert("증명서 발급대상이 아닙니다.");
    });

    el("periodSelect").addEventListener("change", (e)=>{
      currentMonths = e.target.value;
      renderAll();
    });

    // ✅ 초기 렌더 (딱 한 번)
    renderCounts();
    setActiveTab(current);
    renderAll();
  </script>
</body>
</html>
